{{ block title }}ÉCRAN 4 : Investissez vos jetons - Décision 1{{ endblock }} {{
block content }}
<div class="container mt-4" style="max-width: 800px">
  <div class="card">
    <div class="card-header bg-primary text-white">
      <h4>Investissez vos jetons - Décision 1</h4>
    </div>
    <div class="card-body">
      <p class="lead">
        Avec <strong>10</strong> de <strong>vos</strong> jetons, vous pouvez :
      </p>
      <ul>
        <li>tous les garder,</li>
        <li>
          <strong>OU</strong> les investir en partie ou en totalité dans un jeu
          risqué.
        </li>
      </ul>

      <div class="alert alert-info mt-4">
        <h5>🔍 <strong>Comment fonctionne le jeu risqué ?</strong></h5>
        <p>
          Un tirage au sort est effectué dans une urne contenant 12 boules :
        </p>
        <p>
          <span class="badge badge-warning">🟡 6 boules JAUNES</span> &nbsp;
          <span class="badge badge-secondary">🟣 6 boules VIOLETTES</span>
        </p>

        <p>
          Avec autant de boules 🟡 que 🟣, vous avez 1 chance sur 2 de tirer
          chaque boule :
        </p>
        <ul>
          <li>
            🟡 tirage JAUNE →
            <strong>vous gagnez 3 fois les jetons investis</strong>
          </li>
          <li>
            🟣 tirage VIOLET → <strong>vous perdez les jetons investis</strong>
          </li>
        </ul>
      </div>

      <div class="alert alert-light border">
        <h6>
          💡 <strong>Exemple :</strong> Vous investissez 4 jetons (et en gardez
          6).
        </h6>
        <ul>
          <li>
            🟡 <strong>tirage JAUNE :</strong> vous gagnez 3 × 4 jetons = 12
            jetons<br />
            Votre total : 12 gagnés + 6 gardés = <strong>18 jetons</strong>
          </li>
          <li>
            🟣 <strong>tirage VIOLET :</strong> vous perdez les 4 jetons
            investis et ne gagnez donc rien<br />
            Votre total : 0 gagné + 6 gardés = <strong>6 jetons</strong>
          </li>
        </ul>
      </div>

      {{ formfields }}

      <div class="alert alert-warning">
        <strong>⚠️ Important :</strong> Cette décision (comme les suivantes)
        <strong>peut être sélectionnée au hasard</strong> pour calculer votre
        <strong>gain final</strong>.
      </div>

      <div class="form-group">
        <label class="form-label">
          <strong>Quelle est votre décision ?</strong>
        </label>
        <div class="row align-items-center">
          <div class="col-md-12">
            <span
              >Je décide d'investir
              <span id="investment-display">0</span> jetons → je garde
              <span id="kept-tokens">10</span> jetons.</span
            >
          </div>
        </div>
      </div>

      <div class="card mt-4" id="outcome-display">
        <div class="card-header">
          <strong>Vos jetons après tirage :</strong>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-6">
              <div class="border p-3 text-center bg-light-yellow">
                <strong>🟡 Boule JAUNE</strong><br />
                <span id="yellow-outcome"
                  >10 jetons gardés + 3 × 0 jetons gagnés = 10 jetons</span
                >
              </div>
            </div>
            <div class="col-md-6">
              <div class="border p-3 text-center bg-light-purple">
                <strong>🟣 Boule VIOLETTE</strong><br />
                <span id="purple-outcome">10 jetons gardés</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="text-center mt-4">{{ next_button }}</div>
    </div>
  </div>
</div>

<script>
  function updateOutcomes() {
    const investment =
      parseInt(document.getElementById("id_decision_1_investment").value) || 0;
    const kept = 10 - investment;
    const wonIfYellow = investment * 3;
    const totalIfYellow = kept + wonIfYellow;

    document.getElementById("investment-display").textContent = investment;
    document.getElementById("kept-tokens").textContent = kept;
    document.getElementById(
      "yellow-outcome"
    ).textContent = `${kept} jetons gardés + 3 × ${investment} jetons gagnés = ${totalIfYellow} jetons`;
    document.getElementById(
      "purple-outcome"
    ).textContent = `${kept} jetons gardés`;
  }

  document.addEventListener("DOMContentLoaded", function () {
    const investmentInput = document.getElementById("id_decision_1_investment");
    if (investmentInput) {
      investmentInput.addEventListener("input", updateOutcomes);
    }
  });
</script>

{{ endblock }}
